<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: ChefCompat::CopiedFromChef::Chef::Mixin::ParamsValidate
  
    &mdash; Documentation by YARD 0.9.5
  
</title>

  <link rel="stylesheet" href="../../../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "ChefCompat::CopiedFromChef::Chef::Mixin::ParamsValidate";
  relpath = '../../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../../class_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../../_index.html">Index (P)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../../ChefCompat.html" title="ChefCompat (module)">ChefCompat</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../../CopiedFromChef.html" title="ChefCompat::CopiedFromChef (module)">CopiedFromChef</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Chef.html" title="ChefCompat::CopiedFromChef::Chef (class)">Chef</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Mixin.html" title="ChefCompat::CopiedFromChef::Chef::Mixin (module)">Mixin</a></span></span>
     &raquo; 
    <span class="title">ParamsValidate</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="cookbooks_list_link"
        href="../../../../cookbooks_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame" src="../../../../class_list.html"></iframe>

      <div id="content"><h1>Module: ChefCompat::CopiedFromChef::Chef::Mixin::ParamsValidate
  
  
  
</h1>
<div class="box_info">
  

  
  
  <dl>
      <dt>Extended by:</dt>
      <dd><span class='object_link'><a href="" title="ChefCompat::CopiedFromChef::Chef::Mixin::ParamsValidate (module)">ParamsValidate</a></span></dd>
  </dl>
  
  
  
  

  
  <dl>
    <dt>Included in:</dt>
    <dd><span class='object_link'><a href="" title="ChefCompat::CopiedFromChef::Chef::Mixin::ParamsValidate (module)">ParamsValidate</a></span>, <span class='object_link'><a href="Properties.html" title="ChefCompat::CopiedFromChef::Chef::Mixin::Properties (module)">Properties</a></span></dd>
  </dl>
  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>compat_resource/files/lib/chef_compat/copied_from_chef/chef/mixin/params_validate.rb</dd>
  </dl>
  
</div>

<h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="ParamsValidate/SetOrReturnProperty.html" title="ChefCompat::CopiedFromChef::Chef::Mixin::ParamsValidate::SetOrReturnProperty (class)">SetOrReturnProperty</a></span>
    
  
</p>







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#lazy-instance_method" title="#lazy (instance method)">#<strong>lazy</strong>(&amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_or_return-instance_method" title="#set_or_return (instance method)">#<strong>set_or_return</strong>(symbol, value, validation)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#validate-instance_method" title="#validate (instance method)">#<strong>validate</strong>(opts, map)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Takes a hash of options, along with a map to validate them.
</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="lazy-instance_method">
  
    #<strong>lazy</strong>(&amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


134
135
136</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'compat_resource/files/lib/chef_compat/copied_from_chef/chef/mixin/params_validate.rb', line 134</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_lazy identifier id'>lazy</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='rubyid_DelayedEvaluator constant id'>DelayedEvaluator</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='rubyid_block identifier id'>block</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_or_return-instance_method">
  
    #<strong>set_or_return</strong>(symbol, value, validation)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


138
139
140
141</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'compat_resource/files/lib/chef_compat/copied_from_chef/chef/mixin/params_validate.rb', line 138</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_set_or_return identifier id'>set_or_return</span><span class='lparen token'>(</span><span class='rubyid_symbol identifier id'>symbol</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='comma token'>,</span> <span class='rubyid_validation identifier id'>validation</span><span class='rparen token'>)</span>
  <span class='rubyid_property identifier id'>property</span> <span class='assign token'>=</span> <span class='rubyid_SetOrReturnProperty constant id'>SetOrReturnProperty</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='label val'>name:</span> <span class='rubyid_symbol identifier id'>symbol</span><span class='comma token'>,</span> <span class='pow op'>**</span><span class='rubyid_validation identifier id'>validation</span><span class='rparen token'>)</span>
  <span class='rubyid_property identifier id'>property</span><span class='dot token'>.</span><span class='rubyid_call identifier id'>call</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='comma token'>,</span> <span class='rubyid_value identifier id'>value</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="validate-instance_method">
  
    #<strong>validate</strong>(opts, map)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>
Takes a hash of options, along with a map to validate them. Returns the
original options hash, plus any changes that might have been made (through
things like setting default values in the validation map)
</p>
<p>
For example:
</p>
<pre class="code ruby18"><code class="ruby18">
  validate({ :one =&gt; &quot;neat&quot; }, { :one =&gt; { :kind_of =&gt; String }})
</code></pre>
<p>
Would raise an exception if the value of :one above is not a kind_of?
string. Valid map options are:
</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>opts</span>
      
      
        <span class='type'>(<tt>Hash&lt;Symbol,Object&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
Validation opts. @option opts [Object,Array] :is An object, or list of
</p>
<pre class="code ruby18"><code class="ruby18">
  objects, that must match the value using Ruby's `===` operator
  (`opts[:is].any? { |v| v === value }`). (See #_pv_is.)
</code></pre>
<p>
@option opts [Object,Array] :equal_to An object, or list
</p>
<pre class="code ruby18"><code class="ruby18">
  of objects, that must be equal to the value using Ruby's `==`
  operator (`opts[:is].any? { |v| v == value }`)  (See #_pv_equal_to.)
</code></pre>
<p>
@option opts [Regexp,Array&lt;Regexp&gt;] :regex An object, or
</p>
<pre class="code ruby18"><code class="ruby18">
  list of objects, that must match the value with `regex.match(value)`.
  (See #_pv_regex)
</code></pre>
<p>
@option opts [Class,Array&lt;Class&gt;] :kind_of A class, or
</p>
<pre class="code ruby18"><code class="ruby18">
  list of classes, that the value must be an instance of.  (See
  #_pv_kind_of.)
</code></pre>
<p>
@option opts [Hash&lt;String,Proc&gt;] :callbacks A hash of
</p>
<pre class="code ruby18"><code class="ruby18">
  messages -&gt; procs, all of which match the value. The proc must
  return a truthy or falsey value (true means it matches).  (See
  #_pv_callbacks.)
</code></pre>
<p>
@option opts [Symbol,Array&lt;Symbol&gt;] :respond_to A method
</p>
<pre class="code ruby18"><code class="ruby18">
  name, or list of method names, the value must respond to.  (See
  #_pv_respond_to.)
</code></pre>
<p>
@option opts [Symbol,Array&lt;Symbol&gt;] :cannot_be A property,
</p>
<pre class="code ruby18"><code class="ruby18">
  or a list of properties, that the value cannot have (such as `:nil` or
  `:empty`). The method with a questionmark at the end is called on the
  value (e.g. `value.empty?`). If the value does not have this method,
  it is considered valid (i.e. if you don't respond to `empty?` we
  assume you are not empty).  (See #_pv_cannot_be.)
</code></pre>
<p>
@option opts [Proc] :coerce A proc which will be called to
</p>
<pre class="code ruby18"><code class="ruby18">
  transform the user input to canonical form. The value is passed in,
  and the transformed value returned as output. Lazy values will *not*
  be passed to this method until after they are evaluated. Called in the
  context of the resource (meaning you can access other properties).
  (See #_pv_coerce.) (See #_pv_coerce.)
</code></pre>
<p>
@option opts [Boolean] :required `true` if this property
</p>
<pre class="code ruby18"><code class="ruby18">
  must be present and not `nil`; `false` otherwise. This is checked
  after the resource is fully initialized. (See #_pv_required.)
</code></pre>
<p>
@option opts [Boolean] :name_property `true` if this
</p>
<pre class="code ruby18"><code class="ruby18">
  property defaults to the same value as `name`. Equivalent to
  `default: lazy { name }`, except that #property_is_set? will
  return `true` if the property is set *or* if `name` is set. (See
  #_pv_name_property.)
</code></pre>
<p>
@option opts [Boolean] :name_attribute Same as `name_property`. @option
opts [Object] :default The value this property
</p>
<pre class="code ruby18"><code class="ruby18">
  will return if the user does not set one. If this is `lazy`, it will
  be run in the context of the instance (and able to access other
  properties).  (See #_pv_default.)
</code></pre>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'compat_resource/files/lib/chef_compat/copied_from_chef/chef/mixin/params_validate.rb', line 100</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_validate identifier id'>validate</span><span class='lparen token'>(</span><span class='rubyid_opts identifier id'>opts</span><span class='comma token'>,</span> <span class='rubyid_map identifier id'>map</span><span class='rparen token'>)</span>
  <span class='rubyid_map identifier id'>map</span> <span class='assign token'>=</span> <span class='rubyid_map identifier id'>map</span><span class='dot token'>.</span><span class='rubyid_validation_options identifier id'>validation_options</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_map identifier id'>map</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='rubyid_Property constant id'>Property</span><span class='rparen token'>)</span>

  <span class='comment val'>#--</span>
  <span class='comment val'># validate works by taking the keys in the validation map, assuming it's a hash, and</span>
  <span class='comment val'># looking for _pv_:symbol as methods.  Assuming it find them, it calls the right</span>
  <span class='comment val'># one.</span>
  <span class='comment val'>#++</span>
  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>&quot;Options must be a hash&quot;</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_opts identifier id'>opts</span><span class='dot token'>.</span><span class='rubyid_kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>
  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>&quot;Validation Map must be a hash&quot;</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_map identifier id'>map</span><span class='dot token'>.</span><span class='rubyid_kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='rubyid_Hash constant id'>Hash</span><span class='rparen token'>)</span>

  <span class='rubyid_map identifier id'>map</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_key identifier id'>key</span><span class='comma token'>,</span> <span class='rubyid_validation identifier id'>validation</span><span class='bitor op'>|</span>
    <span class='rubyid_unless unless kw'>unless</span> <span class='rubyid_key identifier id'>key</span><span class='dot token'>.</span><span class='rubyid_kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='rubyid_Symbol constant id'>Symbol</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='rubyid_key identifier id'>key</span><span class='dot token'>.</span><span class='rubyid_kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='rubyid_String constant id'>String</span><span class='rparen token'>)</span>
      <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='string val'>&quot;Validation map keys must be symbols or strings!&quot;</span>
    <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_case case kw'>case</span> <span class='rubyid_validation identifier id'>validation</span>
    <span class='rubyid_when when kw'>when</span> <span class='rubyid_true true kw'>true</span>
      <span class='rubyid__pv_required identifier id'>_pv_required</span><span class='lparen token'>(</span><span class='rubyid_opts identifier id'>opts</span><span class='comma token'>,</span> <span class='rubyid_key identifier id'>key</span><span class='rparen token'>)</span>
    <span class='rubyid_when when kw'>when</span> <span class='rubyid_false false kw'>false</span>
      <span class='rubyid_true true kw'>true</span>
    <span class='rubyid_when when kw'>when</span> <span class='rubyid_Hash constant id'>Hash</span>
      <span class='rubyid_validation identifier id'>validation</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_check identifier id'>check</span><span class='comma token'>,</span> <span class='rubyid_carg identifier id'>carg</span><span class='bitor op'>|</span>
        <span class='rubyid_check_method identifier id'>check_method</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;_pv_#{check}&quot;</span>
        <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='rubyid_check_method identifier id'>check_method</span><span class='comma token'>,</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
          <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_check_method identifier id'>check_method</span><span class='comma token'>,</span> <span class='rubyid_opts identifier id'>opts</span><span class='comma token'>,</span> <span class='rubyid_key identifier id'>key</span><span class='comma token'>,</span> <span class='rubyid_carg identifier id'>carg</span><span class='rparen token'>)</span>
        <span class='rubyid_else else kw'>else</span>
          <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Validation map has unknown check: #{check}&quot;</span>
        <span class='rubyid_end end kw'>end</span>
      <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_opts identifier id'>opts</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Sep 19 15:35:20 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.5 (ruby-1.8.7).
</div>

    </div>
  </body>
</html>